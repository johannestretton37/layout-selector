(this["webpackJsonplayout-selector"]=this["webpackJsonplayout-selector"]||[]).push([[0],{245:function(e,t,n){},264:function(e,t){},436:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(17),o=n(120),r=(n(164),n(243),n(244),n(245),n(84)),s=n(112),c=n(29),l=n(90),d=n.n(l),u=n(155),f=n(211),h=n(212),j=n(238),p=n(236),y=n(1),b=n(3),v=n(9),O=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).onConfigure=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{parameters:a.state.parameters});case 1:case"end":return e.stop()}}),e)}))),a.handleChange=function(e){var t=a.state.layoutContentTypes.find((function(t){return t.value===e.target.value}));a.setState((function(n){return Object(c.a)(Object(c.a)({},n),{},{currentContentType:e.target.value,fields:t.fields,availableLayouts:t.availableLayouts})}))},a.handleClick=function(e,t){a.setState((function(n){var a=[],i=n.parameters.fieldsConfig[n.currentContentType][e];return i.includes(t)?(console.log('Layout "'.concat(e,' will HIDE "').concat(t,'" \ud83d\ude48')),a=i.filter((function(e){return e!==t}))):(console.log('Layout "'.concat(e,' will SHOW "').concat(t,'" \u2705')),a=[].concat(Object(s.a)(i),[t])),Object(c.a)(Object(c.a)({},n),{},{parameters:Object(c.a)(Object(c.a)({},n.parameters),{},{fieldsConfig:Object(c.a)(Object(c.a)({},n.parameters.fieldsConfig),{},Object(r.a)({},n.currentContentType,Object(c.a)(Object(c.a)({},n.parameters.fieldsConfig[n.currentContentType]),{},Object(r.a)({},e,a))))})})}))},a.state={currentContentType:"",layoutContentTypes:[],contentTypes:{},fields:[],availableLayouts:[],parameters:{fieldsConfig:{}}},e.sdk.app.onConfigure((function(){return a.onConfigure()})),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,n,a,i,o,r,s,c=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.sdk.app.getParameters();case 2:return i=e.sent,o=(null===i||void 0===i?void 0:i.fieldsConfig)||{},e.next=6,this.props.sdk.space.getContentTypes();case 6:r=e.sent,s=r.items.filter((function(e){return e.fields.some((function(e){return"layout"===e.id}))})).map((function(e){var t,n=(null===(t=e.fields.find((function(e){return"layout"===e.id})).validations)||void 0===t?void 0:t.find((function(e){return void 0!==e.in}))).in;return o[e.sys.id]=o[e.sys.id]||{},n.forEach((function(t){o[e.sys.id][t]=o[e.sys.id][t]||[]})),{friendlyName:e.name,value:e.sys.id,fields:e.fields,availableLayouts:n}})),this.setState(i?{parameters:{fieldsConfig:o},currentContentType:null===(t=s[0])||void 0===t?void 0:t.value,contentTypes:{},layoutContentTypes:s,fields:(null===(n=s[0])||void 0===n?void 0:n.fields)||[],availableLayouts:(null===(a=s[0])||void 0===a?void 0:a.availableLayouts)||[]}:this.state,(function(){c.props.sdk.app.setReady()}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;return Object(v.jsx)(y.ab,{className:Object(b.a)({margin:"80px"}),children:Object(v.jsxs)(y.r,{children:[Object(v.jsx)(y.t,{children:"Layout Selector Setup"}),Object(v.jsx)(y.E,{children:"Choose a Content Model that will use this Entry Editor app"}),this.state.layoutContentTypes.length<=0&&Object(v.jsx)(y.C,{noteType:"negative",children:'Your space does not contain any Content Models with an id of "layout"'}),Object(v.jsx)(y.I,{id:"optionSelect",name:"optionSelect",width:"large",onChange:this.handleChange,children:this.state.layoutContentTypes.map((function(e){return Object(v.jsx)(y.D,{value:e.value,children:e.friendlyName},e.value)}))}),Object(v.jsxs)(y.E,{children:[Object(v.jsx)("b",{children:"NOTE:"}),' The Content Model must have a field called "layout" to be visible here. The layout field should have a ',Object(v.jsx)("i",{children:"validation"})," ","set to only accept certain values. These values will be listed here and you may choose to display or hide them when a user has chosen a layout."]}),Object(v.jsx)(y.C,{children:"Every time these settings are saved, you must add the entry editor to the content model again."}),Object(v.jsxs)(y.N,{children:[Object(v.jsx)(y.Q,{children:Object(v.jsx)(y.R,{children:null===(e=this.state.availableLayouts)||void 0===e?void 0:e.map((function(e){return Object(v.jsx)(y.P,{children:e},e)}))})}),Object(v.jsx)(y.O,{children:this.state.fields.length>0&&this.state.fields.map((function(e){return"layout"===e.id?null:Object(v.jsx)(y.R,{children:t.state.availableLayouts.map((function(n){return Object(v.jsxs)(y.P,{onClick:function(a){return t.handleClick(n,e.id)},children:[t.state.parameters.fieldsConfig[t.state.currentContentType][n].includes(e.id)?"\u2705":"\ud83d\udeab",Object(v.jsxs)("span",{children:[" ",e.name]})]},n)}))},e.id)}))})]})]})})}}]),n}(a.Component),m=n(237),g=(n(248),n(249),n(162)),C=n(2),x=n.n(C),k=function(e){var t,n,a=e.field;a.onSchemaErrorsChanged=function(){return function(){return null}},a.setInvalid=function(){return null},a.locale=e.sdk.locales.default;var i=e.sdk.contentType.fields.find((function(e){return e.id===a.id})),o=null===(t=e.sdk.editor.editorInterface)||void 0===t||null===(n=t.controls)||void 0===n?void 0:n.find((function(e){return e.fieldId===a.id})),r=Object(c.a)(Object(c.a)({},e.sdk),{},{field:a}),s="layout"===a.id?function(e){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(y.t,{children:e}),Object(v.jsx)(y.E,{children:"Choose a layout to display relevant fields only"})]})}:void 0;return i&&o?Object(v.jsx)("div",{style:{fontFamily:x.a.fontStackPrimary},children:Object(v.jsx)(g.b,{sdk:r,renderHeading:s,name:i.name,children:Object(v.jsx)(g.a,{sdk:r,widgetId:o.widgetId})})}):Object(v.jsx)(y.C,{noteType:"negative",children:'Something went wrong. Try clicking on the "Editor" tab or reload the page.'})};var T=function(e){var t=Object(a.useState)([]),n=Object(m.a)(t,2),i=n[0],o=n[1];return Object(a.useEffect)((function(){return e.sdk.entry.fields.layout.onValueChanged((function(t){var n,a=function(e,t,n){if(void 0===t)return["layout"];if(!n[e.sys.id][t])throw console.log(n),new Error('The "'.concat(t,'" layout is not implemented yet'));var a=e.fields.map((function(e){return e.id})).filter((function(a){return n[e.sys.id][t].includes(a)}));return["layout"].concat(Object(s.a)(a))}(e.sdk.contentType,t,e.fieldsConfig);o((n=e.sdk.entry,a.map((function(e){return n.fields[e]}))))}))}),[e.sdk,e.fieldsConfig]),Object(v.jsx)(v.Fragment,{children:i.map((function(t){return Object(v.jsx)("div",{style:"layout"===t.id?{padding:"".concat(x.a.spacingM," 0 1px"),background:x.a.colorElementLightest,borderBottom:"1px solid ".concat(x.a.colorElementMid)}:void 0,children:Object(v.jsx)(k,{field:t,sdk:e.sdk})},t.id)}))})};Object(o.init)((function(e){var t=document.getElementById("root"),n=e.parameters.installation.fieldsConfig;[{location:o.locations.LOCATION_APP_CONFIG,component:Object(v.jsx)(O,{sdk:e})},{location:o.locations.LOCATION_ENTRY_EDITOR,component:Object(v.jsx)(T,{sdk:e,fieldsConfig:n})}].forEach((function(n){e.location.is(n.location)&&Object(i.render)(n.component,t)}))}))}},[[436,1,2]]]);
//# sourceMappingURL=main.3fa11529.chunk.js.map